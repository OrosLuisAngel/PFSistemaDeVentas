<html lang="es">
  <head th:replace="~{/fragments/template :: head}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
  </head>
<body class="bg-gray-100 font-sans antialiased">



  <div class="flex h-screen">
    <!-- Sidebar -->
    <div class="bg-[#cc0000] text-white w-64 p-4 flex flex-col">
     <div class="flex items-center mb-8">
    <h2 class="text-2xl">
       Bodeha
      </h2>
     </div>
     <nav class="flex-1">
      <ul>
        <li class="mb-4">
          <a class="flex items-center p-2 rounded-lg" href="productos">
           <i class="fas fa-box mr-3">
           </i>
           Productos
          </a>
         </li>
       <li class="mb-4">
        <a class="flex items-center p-2" href="usuarios">
         <i class="fas fa-users mr-3">
         </i>
         Usuarios
        </a>
       </li>
       <li class="mb-4">
        <a class="flex items-center p-2" href="categorias">
            <i class="fas fa-tags mr-3">
            </i>
         Categorias
        </a>
       </li>
       <li class="mb-4">
        <a class="flex items-center p-2 bg-[#DE523A] rounded-lg" href="detalle-productos">
            <i class="fas fa-file-alt mr-3">
            </i>
         Reportes
        </a>
       </li>
       <li class="mb-4">
        <a class="flex items-center p-2" href="ventas">
            <i class="fas fa-shopping-cart mr-3">
            </i>
         Ventas
        </a>
       </li>
       <li class="mb-4">
        <a class="flex items-center p-2" href="promociones">
            <i class="fas fa-bullhorn mr-3">
            </i>
         Promociones
        </a>
       </li>
       <li class="mb-4">
        <a class="flex items-center p-2" href="#">
         <i class="fas fa-cog mr-3">
         </i>
         Settings
        </a>
       </li>
      </ul>
     </nav>
    </div>
    <!-- Main Content -->
    <div class="flex-1 p-6">
     <!-- Header -->
     <div class="flex justify-between items-center mb-6">
      <div class="flex items-center space-x-4">
       <a class="text-gray-600" href="#">
        Reportes
       </a>
      </div>
      <div class="flex items-center space-x-4">
       <i class="fas fa-bell text-gray-600">
       </i>
       <i class="fas fa-user-circle text-gray-600">
       </i>
      </div>
     </div>
     <div class="bg-white rounded-lg shadow-md p-4">
      <table class="w-full">
       <thead>
        <tr class="text-left text-gray-600">
          <th>ID</th>
          <th>Usuario</th>
          <th>Producto</th>
          <th>ID_Venta</th>
          <th>Promoción</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Fecha de Compra</th>
          <th>Acciones</th>
      </tr>
      </thead>
      <tbody>
        <tr th:each="detalle : ${detalles}">
          <td class="flex items-center"><i class="fas fa-plus-circle text-green-500 mr-2"></i>[[${detalle.id_detalle_producto}]]</td>
          <td th:text="${detalle.usuario.nombre}"></td>
          <td th:text="${detalle.producto.nombre}"></td>
          <td th:text="${detalle.venta.id_venta}"></td>
          <td th:text="${detalle.promocion.nombre}"></td>
          <td th:text="${detalle.cantidad}"></td>
          <td th:text="${detalle.precio}"></td>
          <td th:text="${detalle.fecha_compra}"></td>
          <td class="flex space-x-2">
              <!-- boton modal -->
              <button class="text-blue-500" data-bs-toggle="modal" th:data-bs-target="'#editarModal' + ${detalle.id_detalle_producto}">
                  <i class="fas fa-pen"></i>
              </button>
              <form class="flex space-x-2 mt-3" th:action="@{/detalle-productos/eliminar/{id_detalle_producto}(id_detalle_producto=${detalle.id_detalle_producto})}" th:method="delete">
                  <button class="text-red-500" type="submit">
                      <i class="fas fa-trash"></i>
                  </button>
              </form>
              <!-- modal edi detalle -->
              <div class="modal fade" th:id="'editarModal' + ${detalle.id_detalle_producto}" tabindex="-1" aria-labelledby="editarModalLabel[[${detalle.id_detalle_producto}]]" aria-hidden="true">
                  <div class="modal-dialog">
                      <div class="modal-content">
                          <div class="modal-header">
                              <h1 class="modal-title fs-5" id="editarModalLabel">Editar Detalle</h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <div class="modal-body">
                              <form method="post" th:action="@{/detalle-productos/actualizar/{id_detalle_producto}(id_detalle_producto=${detalle.id_detalle_producto})}">
                                  <input type="hidden" name="_method" value="PUT" />
                                  <div class="mb-3">
                                      <label for="usuarioInput" class="form-label">Usuario</label>
                                      <select class="form-select" id="usuarioInput" name="id_usuario" required>
                                          <option value="" disabled>Seleccione un usuario</option>
                                          <option th:each="usuario : ${usuarios}" th:value="${usuario.id_usuario}" th:text="${usuario.nombre}" th:selected="${detalle.usuario.id_usuario == usuario.id_usuario}"></option>
                                      </select>
                                  </div>
                                  <div class="mb-3">
                                      <label for="productoInput" class="form-label">Producto</label>
                                      <select class="form-select" id="productoInput" name="id_producto" required>
                                          <option value="" disabled>Seleccione un producto</option>
                                          <option th:each="producto : ${productos}" th:value="${producto.id_producto}" th:text="${producto.nombre}" th:selected="${detalle.producto.id_producto == producto.id_producto}"></option>
                                      </select>
                                  </div>
                                  <div class="mb-3">
                                      <label for="ventaInput" class="form-label">Venta</label>
                                      <select class="form-select" id="ventaInput" name="id_venta" required>
                                          <option value="" disabled>Seleccione una venta</option>
                                          <option th:each="venta : ${ventas}" th:value="${venta.id_venta}" th:text="${venta.id_venta}" th:selected="${detalle.venta.id_venta == venta.id_venta}"></option>
                                      </select>
                                  </div>
                                  <div class="mb-3">
                                      <label for="promocionInput" class="form-label">Promoción</label>
                                      <select class="form-select" id="promocionInput" name="id_promocion" required>
                                          <option value="" disabled>Seleccione una promoción</option>
                                          <option th:each="promocion : ${promociones}" th:value="${promocion.id_promocion}" th:text="${promocion.nombre}" th:selected="${detalle.promocion.id_promocion == promocion.id_promocion}"></option>
                                      </select>
                                  </div>
                                  <div class="mb-3">
                                      <label for="cantidadInput" class="form-label">Cantidad</label>
                                      <input type="number" class="form-control" id="cantidadInput" name="cantidad" th:value="${detalle.cantidad}" required>
                                  </div>
                                  <div class="mb-3">
                                      <label for="precioInput" class="form-label">Precio</label>
                                      <input type="number" class="form-control" id="precioInput" name="precio" th:value="${detalle.precio}" required>
                                  </div>
                                  <div class="mb-3">
                                      <label for="fechaCompraInput" class="form-label">Fecha de Compra</label>
                                      <input type="date" class="form-control" id="fechaCompraInput" name="fecha_compra" th:value="${detalle.fecha_compra}" required>
                                  </div>
                                  <div class="modal-footer">
                                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                      <button type="submit" class="btn bg-[#2b4c7e] hover:bg-[#cc0000] text-white">Guardar cambios</button>
                                  </div>
                              </form>
                          </div>
                      </div>
                  </div>
              </div>
          </td>
      </tr>
      </tbody>
      </table>
     </div>
    </div>
   </div>
</body>
</html>
<!-- <table border="1" style="border-collapse: collapse;">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Precio</th>
                <th>Tamaño</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="producto : ${productos}">
                <td th:text="${producto.id}"></td>
                <td th:text="${producto.nombre}"></td>
                <td th:text="${producto.descripcion}"></td>
                <td th:text="${producto.precio}"></td>
                <td th:text="${producto.tamaño}"></td>
            </tr>
        </tbody>
    </table> -->